"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8896],{59647:(e,s,l)=>{l.d(s,{DatabaseProvider:()=>i,t:()=>c});var r=l(95155),t=l(12115),d=l(75828);let a=(0,d.createServerReference)("008a7ca980c81f6515d34e48945911d00e5f7e24e0",d.callServer,void 0,d.findSourceMapURL,"getDatabaseData"),n=(0,t.createContext)(),i=e=>{let{children:s}=e,[l,d]=(0,t.useState)({sessions:[],grades:[],classes:[],subjects:[],parents:[],teachers:[],term:[],paymentHistory:[],studentHistory:[],student:[]}),[i,c]=(0,t.useState)(!0),[o,x]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async function(){console.log("\uD83D\uDFE1 Fetching database data...");let e=await a();e.success?d(e.data):x(e.error),c(!1)})()},[]),(0,r.jsx)(n.Provider,{value:{databaseData:l,loading:i,error:o},children:s})},c=()=>(0,t.useContext)(n)},98896:(e,s,l)=>{l.r(s),l.d(s,{default:()=>j});var r=l(95155),t=l(12115),d=l(59647),a=l(5565),n=l(78004),i=l(22409),c=l(61538),o=l(6521),x=l(26734),m=l(6408),h=l(35630);let u=e=>{let{studentPercentage:s}=e,l=[{name:"Performance",percentage:parseFloat(s)}];return(0,r.jsx)("div",{className:"w-[100%]",children:(0,r.jsx)(n.u,{width:"100%",height:100,children:(0,r.jsxs)(i.E,{data:l,margin:{top:10,right:30,left:0,bottom:5},children:[(0,r.jsx)(c.d,{strokeDasharray:"3 3"}),(0,r.jsx)(o.W,{dataKey:"name"}),(0,r.jsx)(x.h,{}),(0,r.jsx)(m.m,{}),(0,r.jsx)(h.y,{dataKey:"percentage",fill:"#4A90E2",barSize:50})]})})})},b=e=>{var s,l,n,i;let{filteredResults:c,terms:o,selectedTerm:x,studentInfo:m,selectedSession:h,selectedClass:b,selectedGrade:j}=e,{databaseData:p}=(0,d.t)(),f=(0,t.useRef)(),v=null===(l=p.sessions)||void 0===l?void 0:null===(s=l.find(e=>e.name===h))||void 0===s?void 0:s.id,g=null===(i=p.terms)||void 0===i?void 0:null===(n=i.find(e=>e.id===x))||void 0===n?void 0:n.name;console.log(p.classRecord,"hereeeeeeeeeeee");let N=(0,t.useMemo)(()=>{var e;return(null===(e=p.classRecord)||void 0===e?void 0:e.filter(e=>e.studentId===m.id&&e.termId===x&&e.sessionId===v))||[]},[p.classRecord,m.id,x,v]);console.log(N,"studentClassRecord");let w=(e,s,l)=>{let r=(parseFloat(e)||0)+(parseFloat(s)||0)+(parseFloat(l)||0);return r>=70?"A1":r>=65?"B2":r>=60?"B3":r>=57?"C4":r>=54?"C5":r>=50?"C6":r>=45?"D7":r>=40?"E8":"F9"};console.log(p.classRecord,"classRecord");let y=(0,t.useMemo)(()=>{var e;return(null===(e=p.classRecord)||void 0===e?void 0:e.filter(e=>e.class.name===b&&e.sessionId===v&&e.termId===x).length)||0},[p.classRecord,b,v,x]),S=(0,t.useMemo)(()=>c.reduce((e,s)=>e+s.totalScore,0),[c]),C=(0,t.useMemo)(()=>100*c.length,[c]),I=C>0?(S/C*100).toFixed(2):0,k=(0,t.useMemo)(()=>{var e;return null===(e=p.paymentHistory)||void 0===e?void 0:e.some(e=>e.studentId===m.id&&e.sessionId===v&&e.termId===x&&"PAID"===e.status&&(null!==e.amount||null===e.amount))},[p.paymentHistory,m.id,v,x]);return(0,r.jsx)("div",{className:"p-3 relative",children:k?(0,r.jsxs)("div",{className:"w-[600px]",children:[(0,r.jsxs)("div",{ref:f,id:"printable-area",className:"bg-white p-4 shadow-lg border border-gray-300 print:w-full bg-opacity-10",style:{backgroundImage:"url('/logo.png')",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"30%",backgroundColor:"rgba(255, 255, 255, 0.96)",backgroundBlendMode:"lighten"},children:[(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-center border-b pb-2",children:[(0,r.jsx)(a.default,{src:"/logo.png",width:60,height:60,alt:"School Logo"}),(0,r.jsxs)("div",{className:"text-center flex-1",children:[(0,r.jsx)("h1",{className:"text-xl font-bold uppercase",children:"MUSLIM COMPREHENSIVE COLLEGE"}),(0,r.jsx)("p",{className:"text-sm italic font-semibold",children:'"ALLAH IS GREAT"'}),(0,r.jsx)("p",{className:"text-xs",children:"Behind Premier Tobacco, Ileko Alafin, Odo Eran, Owode, Oyo"}),(0,r.jsx)("p",{className:"text-xs font-semibold",children:"Call: 09036391952 | Website: www.muslimgroupofschool.com"})]}),(0,r.jsx)(a.default,{src:(null==m?void 0:m.img)||"/default-avatar.png",width:60,height:60,alt:"Student Photo",className:"border p-1"})]}),(0,r.jsxs)("p",{className:"border border-black w-full mt-2 text-center text-sm font-bold uppercase",children:[g," Academic Report"]}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-between border border-black text-xs bg-white p-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",null==m?void 0:m.surname," ",null==m?void 0:m.firstname]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Class:"})," ",b]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Admission No:"})," ",null==m?void 0:m.admission]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Grade:"})," ",j]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Session:"})," ",h]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Times Present:"})," ____"]})]})]}),(0,r.jsxs)("div",{className:"flex ",children:[(0,r.jsx)("div",{className:" w-[70%]",children:(0,r.jsxs)("table",{className:"w-full border-collapse border border-gray-300 text-xs mt-3",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-200 text-center",children:[(0,r.jsx)("th",{className:"border p-1 ",children:"Subject"}),(0,r.jsx)("th",{className:"border p-1",children:"CA1"}),(0,r.jsx)("th",{className:"border p-1",children:"CA2"}),(0,r.jsx)("th",{className:"border p-1",children:"Exam"}),(0,r.jsx)("th",{className:"border p-1",children:"Total"}),(0,r.jsx)("th",{className:"border p-1",children:"Avg"}),(0,r.jsx)("th",{className:"border p-1",children:"Performance"}),(0,r.jsx)("th",{className:"border p-1",children:"Position"})]})}),(0,r.jsx)("tbody",{children:c.filter(e=>e.subject).map((e,s)=>(0,r.jsxs)("tr",{className:"text-center border-t",children:[(0,r.jsx)("td",{className:"border p-1 text-left",children:e.subject.name}),(0,r.jsx)("td",{className:"border p-1",children:e.firstAssessment}),(0,r.jsx)("td",{className:"border p-1",children:e.secondAssessment}),(0,r.jsx)("td",{className:"border p-1",children:e.examScore}),(0,r.jsx)("td",{className:"border p-1 font-bold",children:e.totalScore}),(0,r.jsx)("td",{className:"border p-1",children:(e.totalScore/3).toFixed(2)}),(0,r.jsx)("td",{className:"border p-1 font-semibold",children:w(e.firstAssessment,e.secondAssessment,e.examScore)}),(0,r.jsx)("td",{className:"border p-1 font-bold",children:e.subPosition})]},s))})]})}),(0,r.jsx)("div",{className:"w-[30%] ml-4",children:(0,r.jsxs)("table",{className:"w-full border-collapse border border-gray-300 text-sm bg-white mt-2",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-gray-200 text-center",children:(0,r.jsxs)("th",{className:"border p-2",children:[" ",(0,r.jsx)("h3",{className:"text-md font-semibold text-center",children:"Affective Skills"})]})})}),(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{className:"text-center border-t",children:(0,r.jsx)("td",{className:"border p-2 text-left",children:"Attentiveness"})}),(0,r.jsx)("tr",{className:"text-center border-t",children:(0,r.jsx)("td",{className:"border p-2 text-left",children:"Neatness"})}),(0,r.jsx)("tr",{className:"text-center border-t",children:(0,r.jsx)("td",{className:"border p-2 text-left",children:"Punctuality"})}),(0,r.jsx)("tr",{className:"text-center border-t",children:(0,r.jsx)("td",{className:"border p-2 text-left",children:"Honesty"})}),(0,r.jsx)("tr",{className:"text-center border-t",children:(0,r.jsx)("td",{className:"border p-2 text-left",children:"Tolerance"})})]})]})})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-wrap justify-around items-center border p-2 text-xs",children:[(0,r.jsxs)("div",{className:"border w-[50%] text-center",children:["Third Term"===g&&(null==N?void 0:N.map(e=>(0,r.jsxs)("p",{className:"italic border border-gray-300 p-1",children:[(0,r.jsx)("strong",{children:"Promotion:"})," ",e.promotion]},e.id))),(0,r.jsxs)("p",{className:"italic border border-gray-300 p-1",children:[(0,r.jsx)("strong",{children:"Total Number in Class:"})," ",y]})]}),(0,r.jsx)("div",{className:"w-[20%] ml-20",children:(0,r.jsxs)("table",{className:"w-full border-collapse border border-gray-300 text-xs bg-white",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-gray-200 text-center",children:(0,r.jsx)("th",{className:"border p-1",children:"CO-CURRICULAR"})})}),(0,r.jsxs)("tbody",{children:[(0,r.jsx)("tr",{className:"border-t",children:(0,r.jsx)("td",{className:"border p-1 text-left",children:"Sports"})}),(0,r.jsx)("tr",{className:"border-t",children:(0,r.jsx)("td",{className:"border p-1 text-left",children:"Music"})}),(0,r.jsx)("tr",{className:"border-t",children:(0,r.jsx)("td",{className:"border p-1 text-left",children:"Debate"})}),(0,r.jsx)("tr",{className:"border-t",children:(0,r.jsx)("td",{className:"border p-1 text-left",children:"Honesty"})})]})]})})]})}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-around items-center border p-2 mt-2 text-xs",children:[(0,r.jsx)("div",{className:"border p-2 text-xs mt-2",children:null==N?void 0:N.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Teacher's Remark:"}),(0,r.jsx)("p",{className:"px-5 pb-10",children:e.remark})]},e.id))}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("strong",{children:"Student Percentage:"}),(0,r.jsxs)("p",{children:[" ",I,"%"]})]}),(0,r.jsxs)("div",{className:"w-70",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold",children:[null==m?void 0:m.name," percentage (%) Chart"]}),(0,r.jsx)(u,{studentPercentage:I})]})]}),(0,r.jsxs)("div",{className:"mt-3 border-t pt-2 text-center text-xs font-semibold",children:[(0,r.jsx)("p",{children:'"We Offer Excellence in Education"'}),(0,r.jsxs)("div",{className:"flex flex-col items-center mt-2",children:[(0,r.jsx)(a.default,{src:"/principalsign.png",alt:"Principal Signature",width:80,height:40}),(0,r.jsx)("div",{className:"w-40 border-b-2 border-black -mt-1"}),(0,r.jsx)("p",{className:"mt-1",children:"Signed:(Principal)"})]})]})]}),(0,r.jsx)("div",{className:"text-center mt-3",children:(0,r.jsx)("button",{onClick:()=>{let e=document.getElementById("printable-area");e&&(e.style.transform="scale(0.85)",e.style.transformOrigin="top left",setTimeout(()=>{window.print(),e.style.transform="scale(1)"},300))},className:"bg-blue-600 text-white px-4 py-1 rounded text-xs hover:bg-blue-700",children:"Print Result"})})]}):(0,r.jsxs)("div",{className:"p-4 bg-red-100 text-center text-red-600 font-semibold",children:["Payment for ",g," Term is not complete. Please complete the payment to access the result."]})})},j=e=>{var s,l;let{sessions:a,results:n,studentInfo:i,userId:c}=e,[o,x]=(0,t.useState)(null),[m,h]=(0,t.useState)(null),{databaseData:u}=(0,d.t)(),j=u.studentHistory.find(e=>e.session.id===o&&e.studentId===c),p=(null==a?void 0:a.find(e=>e.id===o))||null,f=(null==p?void 0:null===(s=p.grades)||void 0===s?void 0:s.find(e=>{var s;return e.id===(null==i?void 0:null===(s=i.grade)||void 0===s?void 0:s.id)}))||(null==j?void 0:j.grade.id),v=(null==f?void 0:null===(l=f.classes)||void 0===l?void 0:l.find(e=>{var s;return e.id===(null==i?void 0:null===(s=i.class)||void 0===s?void 0:s.id)}))||(null==j?void 0:j.class.id),g=(null==p?void 0:p.terms)||[],N=(null==p?void 0:p.name)||"Session Not Found",w=(null==f?void 0:f.name)||(null==j?void 0:j.grade.name)||"Grade Not Found",y=(null==v?void 0:v.name)||(null==j?void 0:j.class.name)||"Class Not Found",S=n.filter(e=>{var s,l;return e.sessionId===o&&(e.gradeId===(null==f?void 0:f.id)||e.gradeId===(null==j?void 0:null===(s=j.grade)||void 0===s?void 0:s.id))&&(e.classId===(null==v?void 0:v.id)||e.classId===(null==j?void 0:null===(l=j.class)||void 0===l?void 0:l.id))&&e.termId===m});return(0,r.jsxs)("div",{className:"p-6 bg-purple-100 min-h-screen",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-center mb-6 text-gray-800",children:"\uD83D\uDCC4 CHECK RESULT"}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 flex flex-wrap gap-6 justify-between items-center",children:[(0,r.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Select Session"}),(0,r.jsxs)("select",{className:"block w-full p-2 border rounded mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none",value:o||"",onChange:e=>{x(parseInt(e.target.value,10)),h(null)},children:[(0,r.jsx)("option",{value:"",children:"-- Select Session --"}),a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),f&&(0,r.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:"Grade:"}),(0,r.jsx)("p",{className:"text-lg font-bold bg-gray-50 shadow-sm rounded p-2 border",children:w})]}),v&&(0,r.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:"Class:"}),(0,r.jsx)("p",{className:"text-lg font-bold bg-gray-50 shadow-sm rounded p-2 border",children:y})]}),o&&g.length>0&&(0,r.jsxs)("div",{className:"w-full sm:w-auto",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Select Term"}),(0,r.jsxs)("select",{className:"block w-full p-2 border rounded mt-1 focus:ring-2 focus:ring-blue-500 focus:outline-none",value:m||"",onChange:e=>h(parseInt(e.target.value,10)),children:[(0,r.jsx)("option",{value:"",children:"-- Select Term --"}),g.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),m&&S.length>0?(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(b,{filteredResults:S,terms:g,selectedTerm:m,studentInfo:i,selectedSession:N,selectedClass:y,selectedGrade:w,sessions:a})}):m&&(0,r.jsx)("p",{className:"mt-6 text-red-600 font-semibold text-center",children:"⚠️ No results found for the selected term."})]})}}}]);