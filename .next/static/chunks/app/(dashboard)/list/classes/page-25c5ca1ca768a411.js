(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5680],{96553:(e,t,s)=>{Promise.resolve().then(s.bind(s,95943))},77711:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(21956),a=s.n(r)},76046:(e,t,s)=>{"use strict";var r=s(66658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSelectedLayoutSegments")&&s.d(t,{useSelectedLayoutSegments:function(){return r.useSelectedLayoutSegments}})},75828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return l},findSourceMapURL:function(){return a.findSourceMapURL}});let r=s(89603),a=s(33355),l=s(34979).createServerReference},21956:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let r=s(60306)._(s(30580));function a(e,t){var s;let a={};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,r.default)({...l,modules:null==(s=l.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39827:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=s(93719);function a(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return s}},30580:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let r=s(95155),a=s(12115),l=s(39827),d=s(79214);function n(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},s=(0,a.lazy)(()=>t.loader().then(n)),o=t.loading;function c(e){let n=o?(0,r.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?a.Suspense:a.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(d.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(s,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(c,{...i?{fallback:n}:{},children:u})}return c.displayName="LoadableComponent",c}},79214:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}});let r=s(95155),a=s(47650),l=s(75861),d=s(18284);function n(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=l.workAsyncStorage.getStore();if(void 0===s)return null;let n=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files;n.push(...t)}}return 0===n.length?null:(0,r.jsx)(r.Fragment,{children:n.map(e=>{let t=s.assetPrefix+"/_next/"+(0,d.encodeURIPath)(e);return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,a.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},59647:(e,t,s)=>{"use strict";s.d(t,{DatabaseProvider:()=>i,t:()=>o});var r=s(95155),a=s(12115),l=s(75828);let d=(0,l.createServerReference)("008a7ca980c81f6515d34e48945911d00e5f7e24e0",l.callServer,void 0,l.findSourceMapURL,"getDatabaseData"),n=(0,a.createContext)(),i=e=>{let{children:t}=e,[s,l]=(0,a.useState)({sessions:[],grades:[],classes:[],subjects:[],parents:[],teachers:[],term:[],paymentHistory:[],studentHistory:[],student:[]}),[i,o]=(0,a.useState)(!0),[c,u]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async function(){console.log("\uD83D\uDFE1 Fetching database data...");let e=await d();e.success?l(e.data):u(e.error),o(!1)})()},[]),(0,r.jsx)(n.Provider,{value:{databaseData:s,loading:i,error:c},children:t})},o=()=>(0,a.useContext)(n)},84954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(95155),a=s(5565),l=s(12115),d=s(77711),n=s(58549),i=s(62433),o=s(1844),c=s(76046);let u=(0,d.default)(()=>Promise.all([s.e(9606),s.e(3415),s.e(1423),s.e(6352),s.e(2170),s.e(3954)]).then(s.bind(s,53954)),{loadableGenerated:{webpack:()=>[53954]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),m=(0,d.default)(()=>Promise.all([s.e(9606),s.e(3415),s.e(1423),s.e(6352),s.e(2170),s.e(1956)]).then(s.bind(s,1956)),{loadableGenerated:{webpack:()=>[1956]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),f=(0,d.default)(()=>Promise.all([s.e(9606),s.e(1423),s.e(5341)]).then(s.bind(s,45341)),{loadableGenerated:{webpack:()=>[45341]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),h=(0,d.default)(()=>Promise.all([s.e(9606),s.e(5177)]).then(s.bind(s,15177)),{loadableGenerated:{webpack:()=>[15177]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),p=(0,d.default)(()=>Promise.all([s.e(9606),s.e(3415),s.e(1423),s.e(6352),s.e(2170),s.e(3836)]).then(s.bind(s,3836)),{loadableGenerated:{webpack:()=>[3836]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),x={teacher:(e,t,s)=>(0,r.jsx)(u,{type:t,data:s,setOpen:e}),student:(e,t,s)=>(console.log("Data passed to StudentForm:",s),(0,r.jsx)(m,{type:t,data:s,setOpen:e})),subject:(e,t,s)=>(0,r.jsx)(f,{type:t,data:s,setOpen:e}),classTeacher:(e,t,s,a)=>(0,r.jsx)(h,{type:t,data:s,memoizedClasses:a||[],setOpen:e}),admin:(e,t)=>(0,r.jsx)(p,{type:e,data:t})},b={teacher:n.q,student:i.L,subject:o.g},v=e=>{var t;let{table:s,type:d,data:n,id:i,memoizedClasses:o}=e,u="create"===d?"w-7 h-7":"w-8 h-8",[m,f]=(0,l.useState)(!1),[h,p]=(0,l.useState)({success:!1,error:!1}),v=(0,c.useRouter)(),g=async()=>{if(!i)return console.error("No ID provided for ".concat(s," deletion."));try{console.log("Deleting ".concat(s," with ID:"),i);let e=b[s];if(!e)return console.error("No delete function for ".concat(s,"."));(await e(i)).success?(console.log("".concat(s.charAt(0).toUpperCase()+s.slice(1)," successfully deleted.")),p({success:!0,error:!1}),f(!1),v.refresh()):(console.error("Failed to delete ".concat(s,".")),p({success:!1,error:!0}))}catch(e){console.error("Error deleting ".concat(s,":"),e),p({success:!1,error:!0})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"".concat(u," rounded-full flex items-center justify-center"),style:{backgroundColor:"create"===d?"#FAE27C":"update"===d?"#C3EBFA":"#CFCEFF"},onClick:()=>f(!0),children:(0,r.jsx)(a.default,{src:"/".concat(d,".png"),alt:"",width:16,height:16})}),m&&(0,r.jsx)("div",{className:"w-screen h-screen absolute top-0 left-0 bg-black bg-opacity-60 z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"rounded-md bg-white p-4 relative w-[90%] md:w-[70%] lg:w-[60%] xl:w-[50%] 2xl:w-[40%]",children:["delete"===d&&i?(0,r.jsxs)("div",{className:"p-4 flex flex-col gap-4",children:[(0,r.jsxs)("span",{className:"text-center font-medium",children:["This ",s," will be deactivated. Are you sure?"]}),(0,r.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded-md border-none self-center w-max",onClick:g,children:"Delete"}),h.error&&(0,r.jsx)("p",{className:"text-red-500 text-center",children:"Failed to delete. Try again."})]}):(null===(t=x[s])||void 0===t?void 0:t.call(x,f,d,n,o))||(0,r.jsx)("h1",{children:"Invalid Form"}),(0,r.jsx)("div",{className:"absolute top-12 right-4 cursor-pointer",onClick:()=>f(!1),children:(0,r.jsx)(a.default,{src:"/close.png",alt:"Close",width:10,height:10})})]})})]})}},95943:(e,t,s)=>{"use strict";s.d(t,{default:()=>g});var r=s(95155),a=s(12115),l=s(22653),d=s(50305),n=s(35171),i=s(59647),o=s(84954);let c=e=>{var t;let{memoizedClasses:s,selectedClass:l,students:d}=e,[n,c]=(0,a.useState)(!1),{databaseData:u}=(0,i.t)(),m=u.sessions.find(e=>e.isCurrent);return u.terms.filter(e=>e.sessionId===(null==m?void 0:m.id)),s.find(e=>e.id===l),(0,r.jsxs)("div",{className:"mb-6 bg-purple-200 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"\uD83D\uDC68‍\uD83C\uDF93 Students"}),(0,r.jsxs)("div",{className:"p-2 bg-indigo-100 rounded-md text-center",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold",children:"\uD83D\uDC68‍\uD83C\uDFEB Class Teacher"}),(null===(t=s.find(e=>e.id===l))||void 0===t?void 0:t.supervisor)?(0,r.jsxs)("p",{className:"text-sm",children:[s.find(e=>e.id===l).supervisor.name,"(@",s.find(e=>e.id===l).supervisor.username,")"]}):(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"No teacher assigned"})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto bg-white p-4 rounded-lg shadow-md",children:n?(0,r.jsx)("p",{className:"text-gray-500",children:"Loading students..."}):d.length>0?(0,r.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Image"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Name"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Payment Status"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Subjects"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Term/Session"}),(0,r.jsx)("th",{className:"border border-gray-300 p-2",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:d.map((e,t)=>{var s,a,l,d,n,i;return(0,r.jsxs)("tr",{className:"text-center",children:[(0,r.jsx)("td",{className:"border border-gray-300 p-2",children:(0,r.jsx)("img",{src:e.img||"/avatar.png",alt:e.firstname,className:"w-10 h-10 rounded-full mx-auto"})}),(0,r.jsxs)("td",{className:"border border-gray-300 p-2",children:[e.surname," ",e.firstname]}),(0,r.jsx)("td",{className:"border border-gray-300 p-2",children:e.paymentStatus}),(0,r.jsx)("td",{className:"border border-gray-300 p-2",children:(null==e?void 0:null===(s=e.subjects)||void 0===s?void 0:s.length)>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.subjects.map((t,s)=>{var a,l,d;return(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:(null==t?void 0:null===(a=t.subject)||void 0===a?void 0:a.name)||"Unnamed Subject"},null!==(d=null==t?void 0:null===(l=t.subject)||void 0===l?void 0:l.id)&&void 0!==d?d:"subject-".concat(e.id,"-").concat(s))})}):(0,r.jsx)("span",{className:"text-gray-400",children:"No subjects"})}),(0,r.jsxs)("td",{className:"border border-gray-300 p-2",children:[(null==e?void 0:null===(a=e.term)||void 0===a?void 0:a.name)||"N/A"," / ",(null==e?void 0:null===(l=e.session)||void 0===l?void 0:l.name)||"N/A"]}),(0,r.jsxs)("td",{className:"border border-gray-300 p-2 hidden",children:[(null==e?void 0:null===(d=e.class)||void 0===d?void 0:d.name)||"N/A"," / ",(null==e?void 0:null===(n=e.grade)||void 0===n?void 0:n.name)||"N/A"]}),(0,r.jsx)("td",{className:"border border-gray-300 flex justify-center items-center p-3",children:(0,r.jsx)(o.default,{type:"update",table:"student",data:e})})]},null!==(i=null==e?void 0:e.id)&&void 0!==i?i:"student-".concat(t))})})]}):(0,r.jsx)("p",{className:"text-gray-500 text-center",children:"No students found in this class."})})]})};var u=s(99398),m=s(69606),f=s(43415),h=s(85060),p=s(79463),x=s(63105);let b=f.z.object({remarks:f.z.record(f.z.string().min(3,"Remark must be at least 3 characters")),positions:f.z.record(f.z.number({invalid_type_error:"Position must be a number"}).int().positive("Position must be greater than 0")),promotions:f.z.record(f.z.string().optional()),preferredClass:f.z.record(f.z.string().optional())}),v=e=>{let{students:t,memoizedClasses:s,memoizedGrades:l,selectedClass:d,selectedSession:n,currentUser:i}=e,[o,c]=(0,a.useState)([]),[f,v]=(0,a.useState)(null),[g,j]=(0,a.useState)(!1),[y,S]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),[C,P]=(0,a.useState)(!1),[R,D]=(0,a.useState)(!1),{register:T,handleSubmit:k,setValue:O,formState:{errors:E}}=(0,m.mN)({resolver:(0,h.u)(b),defaultValues:{remarks:{},positions:{},promotions:{},preferredClass:{}}});(0,a.useEffect)(()=>{n&&(async()=>{c(await (0,p.w)(n))})()},[n]);let A=async e=>{j(!0);try{let s=t.map(t=>({studentId:t.id,teacherId:i,termId:f,sessionId:n,classId:d,remark:e.remarks[t.id]||"",position:e.positions[t.id]||null,promotion:"Third Term"===L?e.promotions[t.id]||"Not Set":void 0,preferredClass:U&&"Third Term"===L?e.preferredClass[t.id]||"Not Selected":void 0}));console.log(s,"wwwwwwwwwwwwww");let r=await (0,x.Y)(s);r.success?(0,u.oR)({description:"✅ CLASS RECORD saved successfully",variant:"success"}):(0,u.oR)({description:r.error,variant:"destructive"})}catch(e){console.error("Error saving class record:",e.message),(0,u.oR)({description:"An unexpected error occurred",variant:"destructive"})}finally{j(!1)}},_=async e=>{if(!f||!n||!d){(0,u.oR)({description:"Please select a session, term, and class before saving.",variant:"destructive"});return}let t=Object.values(e.positions).filter(e=>e),s=new Set(t);if(t.length!==s.size){w(!0),(0,u.oR)({description:"Duplicate positions are not allowed.",variant:"destructive"});return}if(!R){P(!0);return}await A(e)},M=o.find(e=>e.id===f),L=null==M?void 0:M.name,I=s.find(e=>e.id===d),F=l.find(e=>e.id===(null==I?void 0:I.gradeId)),U=(null==F?void 0:F.name)==="JSS3",z="Third Term"===L;return(0,r.jsxs)("div",{className:"p-6 bg-white shadow-md rounded-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\uD83D\uDCD8 Student Performance"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"Select Term"}),(0,r.jsxs)("select",{className:"border p-2 w-full mt-1 rounded-md focus:ring-2 focus:ring-blue-500",value:f||"",onChange:e=>v(parseInt(e.target.value,10)),children:[(0,r.jsx)("option",{value:"",children:"-- Select Term --"}),o.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),y&&(0,r.jsx)("div",{className:"p-3 mb-4 text-red-800 bg-red-200 border border-red-300 rounded-md",children:"This class already has submitted records for this term."}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("form",{onSubmit:k(_),children:[(0,r.jsxs)("table",{className:"w-full bg-white rounded-lg shadow-md",children:[(0,r.jsx)("thead",{className:"bg-indigo-600 text-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 text-left",children:"Student"}),(0,r.jsx)("th",{className:"p-3 text-left",children:"Remark"}),(0,r.jsx)("th",{className:"p-3 text-left w-24",children:"Position"}),z&&(0,r.jsx)("th",{className:"p-3 text-left",children:"Promotion"}),z&&U&&(0,r.jsx)("th",{className:"p-3 text-left",children:"Preferred Class"})]})}),(0,r.jsx)("tbody",{children:t.length>0?t.map(e=>{var t,s,a,l,d,n,i;return(0,r.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,r.jsx)("td",{className:"p-3",children:"".concat(e.surname," ").concat(e.firstname)}),(0,r.jsxs)("td",{className:"p-3",children:[(0,r.jsx)("input",{type:"text",className:"border p-2 w-full rounded-md focus:ring-2 focus:ring-indigo-500 ".concat((null===(t=E.remarks)||void 0===t?void 0:t[e.id])?"border-red-500":""),...T("remarks.".concat(e.id))}),(null===(s=E.remarks)||void 0===s?void 0:s[e.id])&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.remarks[e.id].message})]}),(0,r.jsxs)("td",{className:"p-3",children:[(0,r.jsx)("input",{type:"number",className:"border p-2 w-full text-center rounded-md focus:ring-2 focus:ring-indigo-500 ".concat((null===(a=E.positions)||void 0===a?void 0:a[e.id])?"border-red-500":""),...T("positions.".concat(e.id),{valueAsNumber:!0})}),(null===(l=E.positions)||void 0===l?void 0:l[e.id])&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.positions[e.id].message})]}),z&&(0,r.jsxs)("td",{className:"p-3",children:[(0,r.jsxs)("select",{className:"border p-2 w-full rounded-md ".concat((null===(d=E.promotions)||void 0===d?void 0:d[e.id])?"border-red-500":""),...T("promotions.".concat(e.id)),children:[(0,r.jsx)("option",{value:"",children:"Select status"}),(0,r.jsx)("option",{value:"PROMOTED",children:"Promoted"}),(0,r.jsx)("option",{value:"REPEATED",children:"Repeat"})]}),(null===(n=E.promotions)||void 0===n?void 0:n[e.id])&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:E.promotions[e.id].message})]}),z&&U&&(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("select",{className:"border p-2 w-full rounded-md ".concat((null===(i=E.preferredClass)||void 0===i?void 0:i[e.id])?"border-red-500":""),...T("preferredClass.".concat(e.id)),children:[(0,r.jsx)("option",{value:"",children:"Select class"}),(0,r.jsx)("option",{value:"SSS1A",children:"SSS1 A"}),(0,r.jsx)("option",{value:"SSS1B",children:"SSS1 B"}),(0,r.jsx)("option",{value:"SSS1C",children:"SSS1 C"})]})})]},e.id)}):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"text-gray-500 text-center p-4",children:"No students found."})})})]}),(0,r.jsx)("div",{className:"mt-6 flex gap-4",children:(0,r.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400",type:"button",disabled:g,onClick:e=>{e.preventDefault(),P(!0)},children:g?"Saving...":"Save"})})]})}),C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-md w-96",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Confirm Submission"}),(0,r.jsx)("p",{className:"mb-4",children:"Are you sure you want to submit this class result? Once submitted, you won't be able to edit it."}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("input",{type:"checkbox",id:"modalConfirm",checked:R,onChange:e=>D(e.target.checked),className:"h-4 w-4"}),(0,r.jsx)("label",{htmlFor:"modalConfirm",className:"text-sm text-gray-700",children:"I agree"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)("button",{className:"bg-gray-300 px-4 py-2 rounded-md",onClick:()=>{P(!1),D(!1)},children:"Cancel"}),(0,r.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-md",onClick:async()=>{if(!R){(0,u.oR)({description:"Please check the confirmation box.",variant:"destructive"});return}P(!1),await k(_)()},children:"Confirm"})]})]})})]})},g=e=>{let{role:t,currentUser:s,sessions:u}=e,{databaseData:m}=(0,i.t)(),[f,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),[b,g]=(0,a.useState)([]),[j,y]=(0,a.useState)(null),[S,N]=(0,a.useState)([]),[w,C]=(0,a.useState)(null),[P,R]=(0,a.useState)([]);(0,a.useEffect)(()=>{!p||isNaN(p)||(h(!0),(async()=>{g(await (0,l.v)(p)),h(!1)})())},[p]);let D=async e=>{y(e),C(null),R([]);let r=await (0,d.j)(p,e);N("teacher"===t?r.filter(e=>{var t;return(null===(t=e.supervisor)||void 0===t?void 0:t.id)===s}):r)},T=async e=>{C(e);let t=await (0,n.V)(p,j,e);console.log("Fetched Students:",t),R(t)},k=(0,a.useMemo)(()=>b,[b]),O=(0,a.useMemo)(()=>S,[S]);return(0,a.useMemo)(()=>P,[P]),(0,r.jsxs)("div",{className:"p-6 ml-10 bg-purple-50",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"\uD83D\uDCDA Grade & Class Management"}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Session"}),(0,r.jsxs)("select",{className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:p||"",onChange:e=>x(parseInt(e.target.value,10)),children:[(0,r.jsx)("option",{value:"",children:"-- Select Session --"}),u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"flex  flex-wrap justify-between gap-6",children:[p&&(0,r.jsxs)("div",{className:"w-full md:w-5/12 shadow-md rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-3",children:"\uD83D\uDCCC Select Grade Level"}),f?(0,r.jsx)("p",{className:"text-gray-500",children:"Loading grades..."}):k.length>0?(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.map(e=>(0,r.jsx)("button",{className:"p-4 md:p-5 ".concat(j===e.id?"bg-indigo-600 text-white":"bg-gray-100"," rounded-lg shadow-md transition-all duration-300 border border-gray-300 hover:bg-indigo-600 hover:text-white"),onClick:()=>D(e.id),children:e.name},e.id))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No grades found."})]}),j&&(0,r.jsxs)("div",{className:"w-full md:w-5/12 shadow-md rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"\uD83C\uDFEB Select Class"}),"admin"===t&&(0,r.jsx)(o.default,{memoizedClasses:O.length>0?O:null,table:"classTeacher",type:"create"})]}),O.length>0?(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:O.map(e=>(0,r.jsx)("button",{className:"p-4 md:p-5 ".concat(w===e.id?"bg-green-600 text-white":"bg-gray-100"," rounded-lg shadow-md transition-all duration-300 border border-gray-300 hover:bg-green-600 hover:text-white"),onClick:()=>T(e.id),children:e.name},e.id))}):(0,r.jsx)("p",{className:"text-gray-500",children:"teacher"===t?"No assigned classes.":"No classes found."})]})]}),w&&(0,r.jsx)("div",{className:"mt-6",children:"admin"===t?(0,r.jsx)(c,{students:P,memoizedClasses:O,selectedClass:w,selectedSession:p}):(0,r.jsx)(v,{students:P,memoizedClasses:O,memoizedGrades:k,selectedClass:w,selectedSession:p,currentUser:s})})]})}},99398:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>u});var r=s(12115);let a=0,l=new Map,d=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?d(s):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],o={toasts:[]};function c(e){o=n(o,e),i.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(o);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},22653:(e,t,s)=>{"use strict";s.d(t,{v:()=>a});var r=s(75828);let a=(0,r.createServerReference)("40475b2b8f8319b0846edf5c7cb5e1e728a1089951",r.callServer,void 0,r.findSourceMapURL,"fetchGrades")},79463:(e,t,s)=>{"use strict";s.d(t,{w:()=>a});var r=s(75828);let a=(0,r.createServerReference)("40ed930b2f4f73b84615356d6006f79094f1b36d34",r.callServer,void 0,r.findSourceMapURL,"fetchTerms")},50305:(e,t,s)=>{"use strict";s.d(t,{j:()=>a});var r=s(75828);let a=(0,r.createServerReference)("6036f28e7ac49e3d154e7ccf564ded12524660b7a3",r.callServer,void 0,r.findSourceMapURL,"fetchClasses")},35171:(e,t,s)=>{"use strict";s.d(t,{V:()=>a});var r=s(75828);let a=(0,r.createServerReference)("7012297d5ec348708a0d112445212707293bf72b0d",r.callServer,void 0,r.findSourceMapURL,"fetchStudents")},62433:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});var r=s(75828);let a=(0,r.createServerReference)("7f2303b054e6e0cb315ec5c1d9aa5d52ec27c8241d",r.callServer,void 0,r.findSourceMapURL,"deleteStudent")},63105:(e,t,s)=>{"use strict";s.d(t,{Y:()=>a});var r=s(75828);let a=(0,r.createServerReference)("7fa0377689c74330a9ea93934256badf544a99e045",r.callServer,void 0,r.findSourceMapURL,"createClassRecord")},1844:(e,t,s)=>{"use strict";s.d(t,{g:()=>a});var r=s(75828);let a=(0,r.createServerReference)("7fe1331afc087c56e2cdd1483c6d40ec0634d1df29",r.callServer,void 0,r.findSourceMapURL,"deleteSubject")},58549:(e,t,s)=>{"use strict";s.d(t,{q:()=>a});var r=s(75828);let a=(0,r.createServerReference)("7ffbcf8ec68b2cfdb180be3e72c5e455ffa9f249ff",r.callServer,void 0,r.findSourceMapURL,"deleteTeacher")},85060:(e,t,s)=>{"use strict";s.d(t,{u:()=>o});var r=s(69606);let a=(e,t,s)=>{if(e&&"reportValidity"in e){let a=(0,r.Jt)(s,t);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},l=(e,t)=>{for(let s in t.fields){let r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?a(r.ref,s,e):r.refs&&r.refs.forEach(t=>a(t,s,e))}},d=(e,t)=>{t.shouldUseNativeValidation&&l(e,t);let s={};for(let a in e){let l=(0,r.Jt)(t.fields,a),d=Object.assign(e[a]||{},{ref:l&&l.ref});if(n(t.names||Object.keys(e),a)){let e=Object.assign({},(0,r.Jt)(s,a));(0,r.hZ)(e,"root",d),(0,r.hZ)(s,a,e)}else(0,r.hZ)(s,a,d)}return s},n=(e,t)=>e.some(e=>e.startsWith(t+"."));var i=function(e,t){for(var s={};e.length;){var a=e[0],l=a.code,d=a.message,n=a.path.join(".");if(!s[n]){if("unionErrors"in a){var i=a.unionErrors[0].errors[0];s[n]={message:i.message,type:i.code}}else s[n]={message:d,type:l}}if("unionErrors"in a&&a.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var o=s[n].types,c=o&&o[a.code];s[n]=(0,r.Gb)(n,t,s,l,c?[].concat(c,a.message):a.message)}e.shift()}return s},o=function(e,t,s){return void 0===s&&(s={}),function(r,a,n){try{return Promise.resolve(function(a,d){try{var i=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](r,t)).then(function(e){return n.shouldUseNativeValidation&&l({},n),{errors:{},values:s.raw?r:e}})}catch(e){return d(e)}return i&&i.then?i.then(void 0,d):i}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:d(i(e.errors,!n.shouldUseNativeValidation&&"all"===n.criteriaMode),n)};throw e}))}catch(e){return Promise.reject(e)}}}}},e=>{var t=t=>e(e.s=t);e.O(0,[5565,9606,3415,8441,1517,7358],()=>t(96553)),_N_E=e.O()}]);