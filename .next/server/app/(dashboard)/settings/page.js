(()=>{var e={};e.id=1670,e.ids=[1670],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},77598:e=>{"use strict";e.exports=require("node:crypto")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},88708:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(70260),n=s(28203),o=s(25155),a=s.n(o),l=s(67292),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);s.d(t,i);let d=["",{children:["(dashboard)",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,22207)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\settings\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,39860)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,62804)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\settings\\page.jsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(dashboard)/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},99276:(e,t,s)=>{Promise.resolve().then(s.bind(s,90237)),Promise.resolve().then(s.bind(s,34200))},86124:(e,t,s)=>{Promise.resolve().then(s.bind(s,73665)),Promise.resolve().then(s.bind(s,75124))},73665:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(45512),n=s(30999),o=s(11766),a=s(22431),l=s(58009);let i=()=>{let{databaseData:e}=(0,n.t)(),[t,s]=(0,l.useState)(null),[i,d]=(0,l.useState)(null),[c,u]=(0,l.useState)([]),m=e.sessions,p=t?e.terms.filter(e=>Number(e.sessionId)===Number(t)):[];(0,l.useEffect)(()=>{if(!e.paymentHistory||0===e.paymentHistory.length){console.log("Payment history is empty or not loaded yet.");return}console.log("Fetching students for session:",t,"and term:",i);let s=e.paymentHistory.filter(e=>Number(e.sessionId)===Number(t)&&Number(e.termId)===Number(i)).map(t=>{let s=e.student.find(e=>e.id===t.studentId);return s?{id:s.id,name:`${s.firstname} ${s.surname}`,status:t.status}:null}).filter(Boolean);console.log("Filtered students:",s),u(s)},[t,i,e.paymentHistory]);let h=(e,t)=>{u(s=>s.map(s=>s.id===e?{...s,status:t}:s))},x=async(e,s)=>{console.log("Updating payment status for:",e,"to",s,"for session",t,"and term",i);try{let r=await (0,a.w)({studentId:e,sessionId:t,termId:i,newStatus:s});console.log(r),r.success&&(0,o.oR)({description:"Payment status updated successfully.",variant:"destructive"})}catch(e){(0,o.oR)({description:"Error updating result.",variant:"destructive"})}};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Session"}),(0,r.jsxs)("select",{className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:t||"",onChange:e=>s(parseInt(e.target.value,10)),children:[(0,r.jsx)("option",{value:"",children:"-- Select Session --"}),m.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),t&&(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Term"}),(0,r.jsxs)("select",{className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:i||"",onChange:e=>d(parseInt(e.target.value,10)),children:[(0,r.jsx)("option",{value:"",children:"-- Select Term --"}),p.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),i&&c.length>0&&(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Student Payment Status"}),(0,r.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border p-2",children:"Student Name"}),(0,r.jsx)("th",{className:"border p-2",children:"Payment Status"}),(0,r.jsx)("th",{className:"border p-2",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:c.map(e=>(0,r.jsxs)("tr",{className:"text-center",children:[(0,r.jsx)("td",{className:"border p-2",children:e.name}),(0,r.jsx)("td",{className:"border p-2",children:(0,r.jsxs)("select",{className:"p-1 border rounded",value:e.status,onChange:t=>h(e.id,t.target.value),children:[(0,r.jsx)("option",{value:"PAID",children:"PAID"}),(0,r.jsx)("option",{value:"NOT_PAID",children:"UNPAID"}),(0,r.jsx)("option",{value:"PARTIALLY_PAID",children:"PARTIALLY PAID"})]})}),(0,r.jsx)("td",{className:"border p-2",children:(0,r.jsx)("button",{className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600",onClick:()=>x(e.id,e.status),children:"Save"})})]},e.id))})]})]}),i&&0===c.length&&(0,r.jsx)("p",{className:"text-gray-500 text-sm mt-4",children:"No students found for this term."})]})}},75124:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(45512),n=s(54197),o=s(45103),a=s(79334),l=s(58009);let i=({session:e})=>{let[t,s]=(0,l.useState)(!1),[i,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(""),[m,p]=(0,l.useState)(!1),h=(0,a.useRouter)(),x=async()=>{if(!i.trim()){u("Session name cannot be empty.");return}let t=e.id;p(!0);let r=await (0,n.q)(t,i);if(console.log(t,i),r.success&&h.refresh(),console.log(r),!r.success){u(r.message),p(!1);return}p(!1),s(!1),d("")};return(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Current Session"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-10 items-center justify-center bg-white p-4 rounded-2xl shadow-lg w-80 max-w-full",children:(0,r.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,r.jsx)("button",{className:"bg-white text-green-600 text-sm p-2 font-bold rounded-lg shadow-md",children:e?.name}),(0,r.jsx)("button",{onClick:()=>s(!0),className:"p-2 rounded-md bg-blue-200 hover:bg-blue-300 transition",children:(0,r.jsx)(o.default,{src:"/update.png",alt:"update",width:24,height:24})})]})}),t&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-[90%] sm:w-[50%] lg:w-[40%] shadow-xl",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Update Session"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter Session Name (e.g., 2025/2026)",defaultValue:e?.name,onChange:e=>d(e.target.value),className:"w-full border p-2 rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-blue-400"}),c&&(0,r.jsx)("p",{className:"text-red-500 text-sm mb-4",children:c}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{className:"bg-gray-300 px-4 py-2 rounded-md hover:bg-gray-400 transition",onClick:()=>s(!1),children:"Cancel"}),(0,r.jsx)("button",{className:`bg-blue-600 text-white px-4 py-2 rounded-md transition ${m?"opacity-50 cursor-not-allowed":"hover:bg-blue-700"}`,onClick:x,disabled:m,children:m?"updating...":"Update"})]})]})})]})}},22207:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(62740),n=s(90237),o=s(34200),a=s(84574),l=s.n(a);let i=async()=>{let e=await l().session.findFirst({where:{isCurrent:!0}});return console.log(e),(0,r.jsxs)("div",{className:"mt-10",children:[(0,r.jsx)("h1",{className:"text-center font-bold",children:"SETTING PAGE"}),(0,r.jsx)(o.default,{session:e}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"UPDATE DEFAULTER"}),(0,r.jsx)(n.default,{})]})]})}},90237:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\EditPayment.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\EditPayment.jsx","default")},34200:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\UpdateSessioncard.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\UpdateSessioncard.jsx","default")},84574:(e,t,s)=>{"use strict";let r;let{PrismaClient:n}=s(96330);r=new n,e.exports=r},22431:(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var r=s(26248);let n=(0,r.createServerReference)("7f0ddba15a4d1a2b5818152aedeee1babfecfaf880",r.callServer,void 0,r.findSourceMapURL,"updatePaymentHistory")},54197:(e,t,s)=>{"use strict";s.d(t,{q:()=>n});var r=s(26248);let n=(0,r.createServerReference)("7f1eb12a3ad3fca310f6993f174cc939657ac976b3",r.callServer,void 0,r.findSourceMapURL,"updateSession")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5994,2761,9187,7989,8077,7801,9562,8968,1237,6540],()=>s(88708));module.exports=r})();