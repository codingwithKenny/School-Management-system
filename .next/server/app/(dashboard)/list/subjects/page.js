(()=>{var e={};e.id=4285,e.ids=[4285],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},77598:e=>{"use strict";e.exports=require("node:crypto")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},63060:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>i,routeModule:()=>m,tree:()=>d});var r=s(70260),a=s(28203),o=s(25155),n=s.n(o),l=s(67292),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["(dashboard)",{children:["list",{children:["subjects",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,71256)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\subjects\\page.jsx"]}]},{}]},{loading:[()=>Promise.resolve().then(s.bind(s,7951)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\loading.jsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,39860)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,62804)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],i=["C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\subjects\\page.jsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/list/subjects/page",pathname:"/list/subjects",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},21216:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,71066,23)),Promise.resolve().then(s.bind(s,93026)),Promise.resolve().then(s.bind(s,3631)),Promise.resolve().then(s.bind(s,91099))},84768:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,41902,23)),Promise.resolve().then(s.bind(s,80766)),Promise.resolve().then(s.bind(s,78868)),Promise.resolve().then(s.bind(s,7375))},96487:()=>{},78335:()=>{},80766:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(45512),a=s(45103),o=s(58009),n=s(13289),l=s(84288),c=s(12692),d=s(15913),i=s(79334);let u=(0,n.default)(()=>Promise.all([s.e(6868),s.e(6131),s.e(6543),s.e(9260),s.e(7544)]).then(s.bind(s,97544)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/TeachersForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),m=(0,n.default)(()=>Promise.all([s.e(6868),s.e(6131),s.e(6543),s.e(9260),s.e(4196)]).then(s.bind(s,74196)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/StudentForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),h=(0,n.default)(()=>Promise.all([s.e(6868),s.e(6543),s.e(3889)]).then(s.bind(s,16270)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/SubjectForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),p=(0,n.default)(()=>Promise.all([s.e(6868),s.e(4351)]).then(s.bind(s,34351)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/ClassteacherForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),x=(0,n.default)(()=>Promise.all([s.e(6868),s.e(6131),s.e(6543),s.e(9260),s.e(4020)]).then(s.bind(s,94020)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/AdminForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),f={teacher:(e,t,s)=>(0,r.jsx)(u,{type:t,data:s,setOpen:e}),student:(e,t,s)=>(console.log("Data passed to StudentForm:",s),(0,r.jsx)(m,{type:t,data:s,setOpen:e})),subject:(e,t,s)=>(0,r.jsx)(h,{type:t,data:s,setOpen:e}),classTeacher:(e,t,s,a)=>(0,r.jsx)(p,{type:t,data:s,memoizedClasses:a||[],setOpen:e}),admin:(e,t)=>(0,r.jsx)(x,{type:e,data:t})},g={teacher:l.q,student:c.L,subject:d.g},b=({table:e,type:t,data:s,id:n,memoizedClasses:l})=>{let[c,d]=(0,o.useState)(!1),[u,m]=(0,o.useState)({success:!1,error:!1}),h=(0,i.useRouter)(),p=async()=>{if(!n)return console.error(`No ID provided for ${e} deletion.`);try{console.log(`Deleting ${e} with ID:`,n);let t=g[e];if(!t)return console.error(`No delete function for ${e}.`);(await t(n)).success?(console.log(`${e.charAt(0).toUpperCase()+e.slice(1)} successfully deleted.`),m({success:!0,error:!1}),d(!1),h.refresh()):(console.error(`Failed to delete ${e}.`),m({success:!1,error:!0}))}catch(t){console.error(`Error deleting ${e}:`,t),m({success:!1,error:!0})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:`${"create"===t?"w-7 h-7":"w-8 h-8"} rounded-full flex items-center justify-center`,style:{backgroundColor:"create"===t?"#FAE27C":"update"===t?"#C3EBFA":"#CFCEFF"},onClick:()=>d(!0),children:(0,r.jsx)(a.default,{src:`/${t}.png`,alt:"",width:16,height:16})}),c&&(0,r.jsx)("div",{className:"w-screen h-screen absolute top-0 left-0 bg-black bg-opacity-60 z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"rounded-md bg-white p-4 relative w-[90%] md:w-[70%] lg:w-[60%] xl:w-[50%] 2xl:w-[40%]",children:["delete"===t&&n?(0,r.jsxs)("div",{className:"p-4 flex flex-col gap-4",children:[(0,r.jsxs)("span",{className:"text-center font-medium",children:["This ",e," will be deactivated. Are you sure?"]}),(0,r.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded-md border-none self-center w-max",onClick:p,children:"Delete"}),u.error&&(0,r.jsx)("p",{className:"text-red-500 text-center",children:"Failed to delete. Try again."})]}):f[e]?.(d,t,s,l)||(0,r.jsx)("h1",{children:"Invalid Form"}),(0,r.jsx)("div",{className:"absolute top-12 right-4 cursor-pointer",onClick:()=>d(!1),children:(0,r.jsx)(a.default,{src:"/close.png",alt:"Close",width:10,height:10})})]})})]})}},78868:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(45512),a=s(79334);s(58009);let o=({page:e,count:t})=>{let s=(0,a.useRouter)(),o=e=>{let t=new URLSearchParams(window.location.search);t.set("page",e.toString());let r=`${window.location.pathname}?${t.toString()}`;s.push(r)};return(0,r.jsxs)("div",{className:"p-4 flex items-center justify-center gap-5 text-gray-500",children:[(0,r.jsx)("button",{disabled:!(10*(e-1)>0),className:"py-2 px-4 rounded-md bg-slate-200 disabled:opacity-50 disable:cursor-not-allowed",onClick:()=>{o(e-1)},children:"Prev"}),(0,r.jsx)("div",{className:"flex items-center gap-2 text-sm",children:Array.from({length:Math.ceil(t/10)},(t,s)=>{let a=s+1;return(0,r.jsx)("button",{className:`px-2 rounded-sm  ${e===a?"bg-[#C3EBFA]":""}`,onClick:()=>{o(a)},children:a},a)})}),(0,r.jsx)("button",{className:"py-2 px-4 rounded-md bg-slate-200 disabled:opacity-50 disable:cursor-not-allowed",onClick:()=>{o(e+1)},disabled:!(10*e<t),children:"Next"})]})}},7375:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(45512),a=s(45103),o=s(79334);s(58009);let n=()=>{let e=(0,o.useRouter)();return(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault();let s=t.currentTarget[0].value,r=new URLSearchParams(window.location.search);r.set("search",s);let a=`${window.location.pathname}?${r.toString()}`;e.push(a)},className:"w-full md:w-auto flex items-center gap-2 text-xs bg-white p-2 rounded-full ring-[1.5px] ring-grey-300",children:[(0,r.jsx)(a.default,{src:"/search.png",alt:"Search Icon",width:14,height:14}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",className:"outline-none text-sm w-full placeholder-gray-500"})]})}},7951:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(62740);s(76301);let a=()=>(0,r.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:"Loading..."})},71256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(62740),a=s(93026),o=s(3631),n=s(68811),l=s(91099),c=s(79235),d=s(84574),i=s.n(d),u=s(35635);s(76301);var m=s(92411),h=s(31831);let p=async({searchParams:e})=>{let t=await (0,m.uG)();"admin"!==t&&(0,h.redirect)(`/${t}`);let s=e?await e:{},d=parseInt(s?.page||1),p={deletedAt:null};s?.search&&(p.name={contains:s.search,mode:"insensitive"});let x=await i().subject.findMany({where:p,include:{teachers:{include:{teacher:!0}}},orderBy:{id:"desc"},take:c.M,skip:(d-1)*c.M}),f=await i().subject.count({where:p}),g=[{header:"Subject Name",accessor:"name"},{header:"Teachers",accessor:"teachers",className:"hidden md:table-cell"},...t?[{header:"Actions",accessor:"actions"}]:[]];return(0,r.jsxs)("div",{className:"bg-white rounded-md p-4 flex-1 m-4 mt-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"hidden md:block text-lg font-semibold",children:"All Subjects"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto",children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)("div",{className:"flex items-center gap-4 self-end",children:[(0,r.jsx)("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#FAE27C]",children:(0,r.jsx)(u.default,{src:"/filter.png",alt:"",width:14,height:14})}),(0,r.jsx)("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#FAE27C]",children:(0,r.jsx)(u.default,{src:"/sort.png",alt:"",width:14,height:14})}),t&&(0,r.jsx)(a.default,{type:"create",table:"subject"})]})]})]}),(0,r.jsx)(n.A,{column:g,renderRow:e=>(0,r.jsxs)("tr",{className:"text-xs border-b border-grey-200 even:bg-slate-50 hover:bg-[#F1F0FF]",children:[(0,r.jsx)("td",{className:"flex items-center gap-4 p-4",children:(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)("h3",{className:"font-semibold",children:e.name})})}),(0,r.jsx)("td",{className:"hidden md:table-cell",children:e.teachers.length>0?e.teachers.map(e=>e.teacher.name).join(", "):"No assigned teacher"}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{type:"update",table:"subject",data:e}),(0,r.jsx)(a.default,{type:"delete",table:"subject",id:e?.id})]})})})]},e.id),data:x||[]}),(0,r.jsx)(o.default,{count:f,page:d})]})}},93026:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\FormModal.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\FormModal.jsx","default")},3631:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\Pagination.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\Pagination.jsx","default")},68811:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(62740);let a=({column:e,renderRow:t,data:s})=>(0,r.jsx)("div",{className:"overflow-x-auto mt-10",children:(0,r.jsxs)("table",{className:"min-w-[80%] mx-auto border border-gray-200 shadow-md rounded-lg",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-gray-100 text-gray-700 text-sm font-semibold",children:e.map(e=>(0,r.jsx)("th",{className:`p-3 text-left border-b ${e.className||""}`,children:e.header},e.accessor))})}),(0,r.jsx)("tbody",{children:s.map(t)})]})})},91099:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\TableSearch.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\TableSearch.jsx","default")},92411:(e,t,s)=>{"use strict";s.d(t,{F6:()=>n,HW:()=>o,uG:()=>l});var r=s(19561);let a=null;async function o(){if(!a){let{userId:e,sessionClaims:t}=await (0,r.j)();a={userId:e,role:t?.metadata?.role||"guest",sessionClaims:t}}return a}async function n(){let{userId:e}=await o();return e}async function l(){let{role:e}=await o();return e}},84574:(e,t,s)=>{"use strict";let r;let{PrismaClient:a}=s(96330);r=new a,e.exports=r},79235:(e,t,s)=>{"use strict";s.d(t,{M:()=>r});let r=10},12692:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});var r=s(26248);let a=(0,r.createServerReference)("7f2303b054e6e0cb315ec5c1d9aa5d52ec27c8241d",r.callServer,void 0,r.findSourceMapURL,"deleteStudent")},15913:(e,t,s)=>{"use strict";s.d(t,{g:()=>a});var r=s(26248);let a=(0,r.createServerReference)("7fe1331afc087c56e2cdd1483c6d40ec0634d1df29",r.callServer,void 0,r.findSourceMapURL,"deleteSubject")},84288:(e,t,s)=>{"use strict";s.d(t,{q:()=>a});var r=s(26248);let a=(0,r.createServerReference)("7ffbcf8ec68b2cfdb180be3e72c5e455ffa9f249ff",r.callServer,void 0,r.findSourceMapURL,"deleteTeacher")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5994,2761,9187,1596,8077,7801,5103,7888,8968,1237,6540],()=>s(63060));module.exports=r})();