(()=>{var e={};e.id=7492,e.ids=[7492],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},77598:e=>{"use strict";e.exports=require("node:crypto")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},20374:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>i});var r=s(70260),a=s(28203),n=s(25155),o=s.n(n),l=s(67292),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let i=["",{children:["(dashboard)",{children:["list",{children:["students",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,80381)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\students\\page.jsx"]}]},{}]},{loading:[()=>Promise.resolve().then(s.bind(s,7951)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\loading.jsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,39860)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,62804)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\students\\page.jsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/list/students/page",pathname:"/list/students",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},21216:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,71066,23)),Promise.resolve().then(s.bind(s,93026)),Promise.resolve().then(s.bind(s,3631)),Promise.resolve().then(s.bind(s,91099))},84768:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,41902,23)),Promise.resolve().then(s.bind(s,80766)),Promise.resolve().then(s.bind(s,78868)),Promise.resolve().then(s.bind(s,7375))},96487:()=>{},78335:()=>{},80766:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(45512),a=s(45103),n=s(58009),o=s(13289),l=s(84288),d=s(12692),i=s(15913),c=s(79334);let m=(0,o.default)(()=>Promise.all([s.e(6868),s.e(6131),s.e(6543),s.e(9260),s.e(7544)]).then(s.bind(s,97544)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/TeachersForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),u=(0,o.default)(()=>Promise.all([s.e(6868),s.e(6131),s.e(6543),s.e(9260),s.e(4196)]).then(s.bind(s,74196)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/StudentForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),h=(0,o.default)(()=>Promise.all([s.e(6868),s.e(6543),s.e(3889)]).then(s.bind(s,16270)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/SubjectForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),p=(0,o.default)(()=>Promise.all([s.e(6868),s.e(4351)]).then(s.bind(s,34351)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/ClassteacherForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),x=(0,o.default)(()=>Promise.all([s.e(6868),s.e(6131),s.e(6543),s.e(9260),s.e(4020)]).then(s.bind(s,94020)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/AdminForm"]},loading:()=>(0,r.jsx)("h1",{children:"Loading..."})}),f={teacher:(e,t,s)=>(0,r.jsx)(m,{type:t,data:s,setOpen:e}),student:(e,t,s)=>(console.log("Data passed to StudentForm:",s),(0,r.jsx)(u,{type:t,data:s,setOpen:e})),subject:(e,t,s)=>(0,r.jsx)(h,{type:t,data:s,setOpen:e}),classTeacher:(e,t,s,a)=>(0,r.jsx)(p,{type:t,data:s,memoizedClasses:a||[],setOpen:e}),admin:(e,t)=>(0,r.jsx)(x,{type:e,data:t})},g={teacher:l.q,student:d.L,subject:i.g},b=({table:e,type:t,data:s,id:o,memoizedClasses:l})=>{let[d,i]=(0,n.useState)(!1),[m,u]=(0,n.useState)({success:!1,error:!1}),h=(0,c.useRouter)(),p=async()=>{if(!o)return console.error(`No ID provided for ${e} deletion.`);try{console.log(`Deleting ${e} with ID:`,o);let t=g[e];if(!t)return console.error(`No delete function for ${e}.`);(await t(o)).success?(console.log(`${e.charAt(0).toUpperCase()+e.slice(1)} successfully deleted.`),u({success:!0,error:!1}),i(!1),h.refresh()):(console.error(`Failed to delete ${e}.`),u({success:!1,error:!0}))}catch(t){console.error(`Error deleting ${e}:`,t),u({success:!1,error:!0})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:`${"create"===t?"w-7 h-7":"w-8 h-8"} rounded-full flex items-center justify-center`,style:{backgroundColor:"create"===t?"#FAE27C":"update"===t?"#C3EBFA":"#CFCEFF"},onClick:()=>i(!0),children:(0,r.jsx)(a.default,{src:`/${t}.png`,alt:"",width:16,height:16})}),d&&(0,r.jsx)("div",{className:"w-screen h-screen absolute top-0 left-0 bg-black bg-opacity-60 z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"rounded-md bg-white p-4 relative w-[90%] md:w-[70%] lg:w-[60%] xl:w-[50%] 2xl:w-[40%]",children:["delete"===t&&o?(0,r.jsxs)("div",{className:"p-4 flex flex-col gap-4",children:[(0,r.jsxs)("span",{className:"text-center font-medium",children:["This ",e," will be deactivated. Are you sure?"]}),(0,r.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded-md border-none self-center w-max",onClick:p,children:"Delete"}),m.error&&(0,r.jsx)("p",{className:"text-red-500 text-center",children:"Failed to delete. Try again."})]}):f[e]?.(i,t,s,l)||(0,r.jsx)("h1",{children:"Invalid Form"}),(0,r.jsx)("div",{className:"absolute top-12 right-4 cursor-pointer",onClick:()=>i(!1),children:(0,r.jsx)(a.default,{src:"/close.png",alt:"Close",width:10,height:10})})]})})]})}},78868:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var r=s(45512),a=s(79334);s(58009);let n=({page:e,count:t})=>{let s=(0,a.useRouter)(),n=e=>{let t=new URLSearchParams(window.location.search);t.set("page",e.toString());let r=`${window.location.pathname}?${t.toString()}`;s.push(r)};return(0,r.jsxs)("div",{className:"p-4 flex items-center justify-center gap-5 text-gray-500",children:[(0,r.jsx)("button",{disabled:!(10*(e-1)>0),className:"py-2 px-4 rounded-md bg-slate-200 disabled:opacity-50 disable:cursor-not-allowed",onClick:()=>{n(e-1)},children:"Prev"}),(0,r.jsx)("div",{className:"flex items-center gap-2 text-sm",children:Array.from({length:Math.ceil(t/10)},(t,s)=>{let a=s+1;return(0,r.jsx)("button",{className:`px-2 rounded-sm  ${e===a?"bg-[#C3EBFA]":""}`,onClick:()=>{n(a)},children:a},a)})}),(0,r.jsx)("button",{className:"py-2 px-4 rounded-md bg-slate-200 disabled:opacity-50 disable:cursor-not-allowed",onClick:()=>{n(e+1)},disabled:!(10*e<t),children:"Next"})]})}},7375:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(45512),a=s(45103),n=s(79334);s(58009);let o=()=>{let e=(0,n.useRouter)();return(0,r.jsxs)("form",{onSubmit:t=>{t.preventDefault();let s=t.currentTarget[0].value,r=new URLSearchParams(window.location.search);r.set("search",s);let a=`${window.location.pathname}?${r.toString()}`;e.push(a)},className:"w-full md:w-auto flex items-center gap-2 text-xs bg-white p-2 rounded-full ring-[1.5px] ring-grey-300",children:[(0,r.jsx)(a.default,{src:"/search.png",alt:"Search Icon",width:14,height:14}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",className:"outline-none text-sm w-full placeholder-gray-500"})]})}},7951:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(62740);s(76301);let a=()=>(0,r.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:"Loading..."})},80381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(62740),a=s(93026),n=s(3631),o=s(68811),l=s(91099),d=s(79235),i=s(84574),c=s.n(i),m=s(35635);s(76301);var u=s(92411);s(5329);let h=async({searchParams:e})=>{let t=await (0,u.uG)(),s=e?await e:{},i=parseInt(s.page||1),h={};if(s){for(let[e,t]of Object.entries(s))if(void 0!==t)switch(e){case"teacherId":h.lessons={some:{teacherId:parseInt(t)}};break;case"search":h.OR=[{name:{contains:t,mode:"insensitive"}},{class:{name:{contains:t,mode:"insensitive"}}}]}}let p=await c().student.findMany({where:{...h,isDeleted:!1},select:{id:!0,firstname:!0,surname:!0,admission:!0,phone:!0,address:!0,email:!0,img:!0,sex:!0,paymentStatus:!0,sessionId:!0,termId:!0,classId:!0,gradeId:!0,class:{select:{id:!0,name:!0}},grade:{select:{id:!0,name:!0}},subjects:{select:{subject:{select:{id:!0,name:!0}}}},createdAt:!0,isDeleted:!0,deletedAt:!0,session:!0,term:!0,paymentHistory:!0,results:!0,attendance:!0,classRecords:!0,histories:!0},take:d.M,skip:(i-1)*d.M}),x=await c().student.count({where:{...h,isDeleted:!1}}),f=[{header:"Info",accessor:"info"},{header:"User Name",accessor:"studentId",className:"hidden md:table-cell"},{header:"Grade",accessor:"grade",className:"hidden md:table-cell"},{header:"Phone",accessor:"phone",className:"hidden lg:table-cell"},{header:"Address",accessor:"address",className:"hidden lg:table-cell"},..."admin"===t?[{header:"Actions",accessor:"actions"}]:[]];return(0,r.jsxs)("div",{className:"bg-purple-50 rounded-md p-4 flex-1 mt-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"hidden md:block text-lg font-semibold",children:"All Students"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto",children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)("div",{className:"flex items-center gap-4 self-end",children:[(0,r.jsx)("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#FAE27C]",children:(0,r.jsx)(m.default,{src:"/filter.png",alt:"",width:14,height:14})}),(0,r.jsx)("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-[#FAE27C]",children:(0,r.jsx)(m.default,{src:"/sort.png",alt:"",width:14,height:14})}),(0,r.jsx)(a.default,{type:"create",table:"student"})]})]})]}),(0,r.jsx)(o.A,{column:f,renderRow:(e,s)=>(0,r.jsxs)("tr",{className:"text-xs border-b border-grey-200 even:bg-slate-50 hover:bg-[#F1F0FF]",children:[(0,r.jsxs)("td",{className:"flex items-center  gap-4 p-4 ",children:[(0,r.jsx)(m.default,{src:e.photo||"/noAvatar.png",alt:"",width:40,height:40,className:"md:hidden xl:block w-10 h-10 object-cover rounded-full"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h3",{className:"font-semibold",children:e.firstname}),(0,r.jsx)("h4",{className:"text-gray-500 text-sm",children:e.class?.name||"N/A"})]})]}),(0,r.jsx)("td",{className:"hidden md:table-cell",children:e.admission}),(0,r.jsx)("td",{className:"hidden md:table-cell",children:e.grade?.name||"N/A"}),(0,r.jsx)("td",{className:"hidden md:table-cell",children:e.phone}),(0,r.jsx)("td",{className:"hidden md:table-cell",children:e.address}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:"admin"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{type:"update",table:"student",data:e}),(0,r.jsx)(a.default,{type:"delete",table:"student",id:e?.id})]})})})]},e.id||`fallback-${s}`),data:p||[]}),(0,r.jsx)(n.default,{page:i,count:x})]})}},93026:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\FormModal.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\FormModal.jsx","default")},3631:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\Pagination.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\Pagination.jsx","default")},68811:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(62740);let a=({column:e,renderRow:t,data:s})=>(0,r.jsx)("div",{className:"overflow-x-auto mt-10",children:(0,r.jsxs)("table",{className:"min-w-[80%] mx-auto border border-gray-200 shadow-md rounded-lg",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-gray-100 text-gray-700 text-sm font-semibold",children:e.map(e=>(0,r.jsx)("th",{className:`p-3 text-left border-b ${e.className||""}`,children:e.header},e.accessor))})}),(0,r.jsx)("tbody",{children:s.map(t)})]})})},91099:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\TableSearch.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\TableSearch.jsx","default")},92411:(e,t,s)=>{"use strict";s.d(t,{F6:()=>n,HW:()=>a,uG:()=>o});var r=s(19561);async function a(){let{userId:e,sessionClaims:t}=await (0,r.j)();return{userId:e,role:t?.metadata?.role,sessionClaims:t}}async function n(){let{userId:e}=await a();return e}async function o(){let{role:e}=await a();return e}},79235:(e,t,s)=>{"use strict";s.d(t,{M:()=>r});let r=10},12692:(e,t,s)=>{"use strict";s.d(t,{L:()=>a});var r=s(26248);let a=(0,r.createServerReference)("7f2303b054e6e0cb315ec5c1d9aa5d52ec27c8241d",r.callServer,void 0,r.findSourceMapURL,"deleteStudent")},15913:(e,t,s)=>{"use strict";s.d(t,{g:()=>a});var r=s(26248);let a=(0,r.createServerReference)("7fe1331afc087c56e2cdd1483c6d40ec0634d1df29",r.callServer,void 0,r.findSourceMapURL,"deleteSubject")},84288:(e,t,s)=>{"use strict";s.d(t,{q:()=>a});var r=s(26248);let a=(0,r.createServerReference)("7ffbcf8ec68b2cfdb180be3e72c5e455ffa9f249ff",r.callServer,void 0,r.findSourceMapURL,"deleteTeacher")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5994,2761,9187,1596,8077,7801,5103,7888,6919,1237,2657],()=>s(20374));module.exports=r})();