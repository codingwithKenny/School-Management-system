(()=>{var e={};e.id=1832,e.ids=[1832],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},77598:e=>{"use strict";e.exports=require("node:crypto")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},88652:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=t(70260),a=t(28203),n=t(25155),i=t.n(n),d=t(67292),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(s,l);let o=["",{children:["(dashboard)",{children:["list",{children:["exams",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,33569)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\exams\\page.jsx"]}]},{}]},{loading:[()=>Promise.resolve().then(t.bind(t,7951)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\loading.jsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,39860)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,62804)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\exams\\page.jsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/list/exams/page",pathname:"/list/exams",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},21216:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,71066,23)),Promise.resolve().then(t.bind(t,93026)),Promise.resolve().then(t.bind(t,3631)),Promise.resolve().then(t.bind(t,91099))},84768:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,41902,23)),Promise.resolve().then(t.bind(t,80766)),Promise.resolve().then(t.bind(t,78868)),Promise.resolve().then(t.bind(t,7375))},33569:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(62740),a=t(3631),n=t(68811),i=t(91099),d=t(84574),l=t.n(d),o=t(35635),c=t(93026),m=t(79235),u=t(4174);let h=async({searchParams:e})=>{let s=e?await e:{},t=parseInt(s.page||1),d={};if(s){for(let[e,t]of Object.entries(s))if(void 0!==t)switch(e){case"classId":d.subject={students:{some:{student:{classId:parseInt(t)}}}};break;case"teacherId":d.subject={teacherId:t};break;case"search":d.subject={name:{contains:t,mode:"insensitive"}}}}switch(u.JC){case"admin":break;case"teacher":d.subject={teacherId:currentUserId};break;case"student":d.subject={students:{some:{studentId:currentUserId}}};break;case"parent":d.subject={students:{some:{student:{parent:{parent_id:currentUserId}}}}};break;default:throw Error("Unauthorized access")}let[h,p]=await l().$transaction([l().exam.findMany({where:d,include:{subject:{include:{teacher:{select:{name:!0,surname:!0}}}},term:{select:{name:!0,session:{select:{name:!0}}}}},take:m.M,skip:m.M*(t-1)}),l().exam.count({where:d})]),x=[{header:"Subject Name",accessor:"subject.name"},{header:"Teacher",accessor:"subject.teacher",className:"hidden md:table-cell"},{header:"Term",accessor:"term.name",className:"hidden md:table-cell"},{header:"Date",accessor:"startTime",className:"hidden md:table-cell"},..."admin"===u.JC?[{header:"Actions",accessor:"actions"}]:[]];return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-md flex-1 m-4 mt-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"hidden md:block text-lg font-semibold",children:"All Exams"}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto",children:[(0,r.jsx)(i.default,{}),(0,r.jsxs)("div",{className:"flex items-center gap-4 self-end",children:[(0,r.jsx)("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-lamaYellow",children:(0,r.jsx)(o.default,{src:"/filter.png",alt:"",width:14,height:14})}),(0,r.jsx)("button",{className:"w-8 h-8 flex items-center justify-center rounded-full bg-lamaYellow",children:(0,r.jsx)(o.default,{src:"/sort.png",alt:"",width:14,height:14})}),"teacher"===u.JC&&(0,r.jsx)(c.default,{table:"exam",type:"create"})]})]})]}),(0,r.jsx)(n.A,{column:x,renderRow:e=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 even:bg-slate-50 text-sm hover:bg-lamaPurpleLight",children:[(0,r.jsx)("td",{className:"flex items-center gap-4 p-4",children:e.subject.name}),(0,r.jsx)("td",{className:"hidden md:table-cell",children:e.subject.teacher.name+" "+e.subject.teacher.surname}),(0,r.jsxs)("td",{className:"hidden md:table-cell",children:[e.term.name," (",e.term.session.name,")"]}),(0,r.jsx)("td",{className:"hidden md:table-cell"}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{className:"flex items-center gap-2",children:("admin"===u.JC||"teacher"===u.JC)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.default,{table:"exam",type:"update",data:e}),(0,r.jsx)(c.default,{table:"exam",type:"delete",id:e.id})]})})})]},e.id),data:h}),(0,r.jsx)(a.default,{page:t,count:p})]})}},84574:(e,s,t)=>{"use strict";let r;let{PrismaClient:a}=t(96330);r=new a,e.exports=r},79235:(e,s,t)=>{"use strict";t.d(s,{M:()=>r});let r=10}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[5994,2761,9187,7989,8077,9562,5635,8968,1237,6540,5791],()=>t(88652));module.exports=r})();