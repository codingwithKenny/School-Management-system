(()=>{var e={};e.id=5680,e.ids=[5680],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},77598:e=>{"use strict";e.exports=require("node:crypto")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},73916:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var t=r(70260),a=r(28203),d=r(25155),n=r.n(d),l=r(67292),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(s,i);let o=["",{children:["(dashboard)",{children:["list",{children:["classes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9977)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\classes\\page.jsx"]}]},{}]},{loading:[()=>Promise.resolve().then(r.bind(r,7951)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\loading.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,39860)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,62804)),"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\app\\(dashboard)\\list\\classes\\page.jsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/list/classes/page",pathname:"/list/classes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},15383:(e,s,r)=>{Promise.resolve().then(r.bind(r,90169))},52175:(e,s,r)=>{Promise.resolve().then(r.bind(r,57103))},96487:()=>{},78335:()=>{},80766:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(45512),a=r(45103),d=r(58009),n=r(13289),l=r(84288),i=r(12692),o=r(15913),c=r(79334);let u=(0,n.default)(()=>Promise.all([r.e(6868),r.e(6131),r.e(6543),r.e(9260),r.e(7544)]).then(r.bind(r,97544)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/TeachersForm"]},loading:()=>(0,t.jsx)("h1",{children:"Loading..."})}),m=(0,n.default)(()=>Promise.all([r.e(6868),r.e(6131),r.e(6543),r.e(9260),r.e(4196)]).then(r.bind(r,74196)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/StudentForm"]},loading:()=>(0,t.jsx)("h1",{children:"Loading..."})}),h=(0,n.default)(()=>Promise.all([r.e(6868),r.e(6543),r.e(3889)]).then(r.bind(r,16270)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/SubjectForm"]},loading:()=>(0,t.jsx)("h1",{children:"Loading..."})}),p=(0,n.default)(()=>Promise.all([r.e(6868),r.e(4351)]).then(r.bind(r,34351)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/ClassteacherForm"]},loading:()=>(0,t.jsx)("h1",{children:"Loading..."})}),x=(0,n.default)(()=>Promise.all([r.e(6868),r.e(6131),r.e(6543),r.e(9260),r.e(4020)]).then(r.bind(r,94020)),{loadableGenerated:{modules:["components\\FormModal.jsx -> ./Forms/AdminForm"]},loading:()=>(0,t.jsx)("h1",{children:"Loading..."})}),f={teacher:(e,s,r)=>(0,t.jsx)(u,{type:s,data:r,setOpen:e}),student:(e,s,r)=>(console.log("Data passed to StudentForm:",r),(0,t.jsx)(m,{type:s,data:r,setOpen:e})),subject:(e,s,r)=>(0,t.jsx)(h,{type:s,data:r,setOpen:e}),classTeacher:(e,s,r,a)=>(0,t.jsx)(p,{type:s,data:r,memoizedClasses:a||[],setOpen:e}),admin:(e,s)=>(0,t.jsx)(x,{type:e,data:s})},g={teacher:l.q,student:i.L,subject:o.g},b=({table:e,type:s,data:r,id:n,memoizedClasses:l})=>{let[i,o]=(0,d.useState)(!1),[u,m]=(0,d.useState)({success:!1,error:!1}),h=(0,c.useRouter)(),p=async()=>{if(!n)return console.error(`No ID provided for ${e} deletion.`);try{console.log(`Deleting ${e} with ID:`,n);let s=g[e];if(!s)return console.error(`No delete function for ${e}.`);(await s(n)).success?(console.log(`${e.charAt(0).toUpperCase()+e.slice(1)} successfully deleted.`),m({success:!0,error:!1}),o(!1),h.refresh()):(console.error(`Failed to delete ${e}.`),m({success:!1,error:!0}))}catch(s){console.error(`Error deleting ${e}:`,s),m({success:!1,error:!0})}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:`${"create"===s?"w-7 h-7":"w-8 h-8"} rounded-full flex items-center justify-center`,style:{backgroundColor:"create"===s?"#FAE27C":"update"===s?"#C3EBFA":"#CFCEFF"},onClick:()=>o(!0),children:(0,t.jsx)(a.default,{src:`/${s}.png`,alt:"",width:16,height:16})}),i&&(0,t.jsx)("div",{className:"w-screen h-screen absolute top-0 left-0 bg-black bg-opacity-60 z-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"rounded-md bg-white p-4 relative w-[90%] md:w-[70%] lg:w-[60%] xl:w-[50%] 2xl:w-[40%]",children:["delete"===s&&n?(0,t.jsxs)("div",{className:"p-4 flex flex-col gap-4",children:[(0,t.jsxs)("span",{className:"text-center font-medium",children:["This ",e," will be deactivated. Are you sure?"]}),(0,t.jsx)("button",{className:"bg-red-500 text-white py-2 px-4 rounded-md border-none self-center w-max",onClick:p,children:"Delete"}),u.error&&(0,t.jsx)("p",{className:"text-red-500 text-center",children:"Failed to delete. Try again."})]}):f[e]?.(o,s,r,l)||(0,t.jsx)("h1",{children:"Invalid Form"}),(0,t.jsx)("div",{className:"absolute top-12 right-4 cursor-pointer",onClick:()=>o(!1),children:(0,t.jsx)(a.default,{src:"/close.png",alt:"Close",width:10,height:10})})]})})]})}},57103:(e,s,r)=>{"use strict";r.d(s,{default:()=>j});var t=r(45512),a=r(58009),d=r(45528),n=r(81780),l=r(58962),i=r(30999),o=r(80766);let c=({memoizedClasses:e,selectedClass:s,students:r})=>{let[d,n]=(0,a.useState)(!1),{databaseData:l}=(0,i.t)(),c=l.sessions.find(e=>e.isCurrent);return l.terms.filter(e=>e.sessionId===c?.id),e.find(e=>e.id===s),(0,t.jsxs)("div",{className:"mb-6 bg-purple-200 rounded-md p-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"\uD83D\uDC68‍\uD83C\uDF93 Students"}),(0,t.jsxs)("div",{className:"p-2 bg-indigo-100 rounded-md text-center",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold",children:"\uD83D\uDC68‍\uD83C\uDFEB Class Teacher"}),e.find(e=>e.id===s)?.supervisor?(0,t.jsxs)("p",{className:"text-sm",children:[e.find(e=>e.id===s).supervisor.name,"(@",e.find(e=>e.id===s).supervisor.username,")"]}):(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No teacher assigned"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto bg-white p-4 rounded-lg shadow-md",children:d?(0,t.jsx)("p",{className:"text-gray-500",children:"Loading students..."}):r.length>0?(0,t.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border border-gray-300 p-2",children:"Image"}),(0,t.jsx)("th",{className:"border border-gray-300 p-2",children:"Name"}),(0,t.jsx)("th",{className:"border border-gray-300 p-2",children:"Payment Status"}),(0,t.jsx)("th",{className:"border border-gray-300 p-2",children:"Subjects"}),(0,t.jsx)("th",{className:"border border-gray-300 p-2",children:"Term/Session"}),(0,t.jsx)("th",{className:"border border-gray-300 p-2",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:r.map((e,s)=>(0,t.jsxs)("tr",{className:"text-center",children:[(0,t.jsx)("td",{className:"border border-gray-300 p-2",children:(0,t.jsx)("img",{src:e.img||"/avatar.png",alt:e.firstname,className:"w-10 h-10 rounded-full mx-auto"})}),(0,t.jsxs)("td",{className:"border border-gray-300 p-2",children:[e.surname," ",e.firstname]}),(0,t.jsx)("td",{className:"border border-gray-300 p-2",children:e.paymentStatus}),(0,t.jsx)("td",{className:"border border-gray-300 p-2",children:e?.subjects?.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.subjects.map((s,r)=>(0,t.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-md text-sm",children:s?.subject?.name||"Unnamed Subject"},s?.subject?.id??`subject-${e.id}-${r}`))}):(0,t.jsx)("span",{className:"text-gray-400",children:"No subjects"})}),(0,t.jsxs)("td",{className:"border border-gray-300 p-2",children:[e?.term?.name||"N/A"," / ",e?.session?.name||"N/A"]}),(0,t.jsxs)("td",{className:"border border-gray-300 p-2 hidden",children:[e?.class?.name||"N/A"," / ",e?.grade?.name||"N/A"]}),(0,t.jsx)("td",{className:"border border-gray-300 flex justify-center items-center p-3",children:(0,t.jsx)(o.default,{type:"update",table:"student",data:e})})]},e?.id??`student-${s}`))})]}):(0,t.jsx)("p",{className:"text-gray-500 text-center",children:"No students found in this class."})})]})};var u=r(11766),m=r(6868),h=r(16131),p=r(81914),x=r(79177),f=r(36468);let g=h.z.object({remarks:h.z.record(h.z.string().min(3,"Remark must be at least 3 characters")),positions:h.z.record(h.z.number({invalid_type_error:"Position must be a number"}).int().positive("Position must be greater than 0")),promotions:h.z.record(h.z.string().optional()),preferredClass:h.z.record(h.z.string().optional())}),b=({students:e,memoizedClasses:s,memoizedGrades:r,selectedClass:d,selectedSession:n,currentUser:l})=>{let[i,o]=(0,a.useState)([]),[c,h]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[N,S]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),[P,D]=(0,a.useState)(!1),{register:R,handleSubmit:k,setValue:E,formState:{errors:F}}=(0,m.mN)({resolver:(0,p.u)(g),defaultValues:{remarks:{},positions:{},promotions:{},preferredClass:{}}});(0,a.useEffect)(()=>{n&&(async()=>{o(await (0,x.w)(n))})()},[n]);let M=async s=>{j(!0);try{let r=e.map(e=>({studentId:e.id,teacherId:l,termId:c,sessionId:n,classId:d,remark:s.remarks[e.id]||"",position:s.positions[e.id]||null,promotion:"Third Term"===$?s.promotions[e.id]||"Not Set":void 0,preferredClass:L&&"Third Term"===$?s.preferredClass[e.id]||"Not Selected":void 0}));console.log(r,"wwwwwwwwwwwwww");let t=await (0,f.Y)(r);t.success?(0,u.oR)({description:"✅ CLASS RECORD saved successfully",variant:"success"}):(0,u.oR)({description:t.error,variant:"destructive"})}catch(e){console.error("Error saving class record:",e.message),(0,u.oR)({description:"An unexpected error occurred",variant:"destructive"})}finally{j(!1)}},U=async e=>{if(!c||!n||!d){(0,u.oR)({description:"Please select a session, term, and class before saving.",variant:"destructive"});return}let s=Object.values(e.positions).filter(e=>e),r=new Set(s);if(s.length!==r.size){S(!0),(0,u.oR)({description:"Duplicate positions are not allowed.",variant:"destructive"});return}if(!P){C(!0);return}await M(e)},A=i.find(e=>e.id===c),$=A?.name,T=s.find(e=>e.id===d),G=r.find(e=>e.id===T?.gradeId),L=G?.name==="JSS3",I="Third Term"===$;return(0,t.jsxs)("div",{className:"p-6 bg-white shadow-md rounded-lg",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\uD83D\uDCD8 Student Performance"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"Select Term"}),(0,t.jsxs)("select",{className:"border p-2 w-full mt-1 rounded-md focus:ring-2 focus:ring-blue-500",value:c||"",onChange:e=>h(parseInt(e.target.value,10)),children:[(0,t.jsx)("option",{value:"",children:"-- Select Term --"}),i.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),v&&(0,t.jsx)("div",{className:"p-3 mb-4 text-red-800 bg-red-200 border border-red-300 rounded-md",children:"This class already has submitted records for this term."}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("form",{onSubmit:k(U),children:[(0,t.jsxs)("table",{className:"w-full bg-white rounded-lg shadow-md",children:[(0,t.jsx)("thead",{className:"bg-indigo-600 text-white",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-3 text-left",children:"Student"}),(0,t.jsx)("th",{className:"p-3 text-left",children:"Remark"}),(0,t.jsx)("th",{className:"p-3 text-left w-24",children:"Position"}),I&&(0,t.jsx)("th",{className:"p-3 text-left",children:"Promotion"}),I&&L&&(0,t.jsx)("th",{className:"p-3 text-left",children:"Preferred Class"})]})}),(0,t.jsx)("tbody",{children:e.length>0?e.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,t.jsx)("td",{className:"p-3",children:`${e.surname} ${e.firstname}`}),(0,t.jsxs)("td",{className:"p-3",children:[(0,t.jsx)("input",{type:"text",className:`border p-2 w-full rounded-md focus:ring-2 focus:ring-indigo-500 ${F.remarks?.[e.id]?"border-red-500":""}`,...R(`remarks.${e.id}`)}),F.remarks?.[e.id]&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.remarks[e.id].message})]}),(0,t.jsxs)("td",{className:"p-3",children:[(0,t.jsx)("input",{type:"number",className:`border p-2 w-full text-center rounded-md focus:ring-2 focus:ring-indigo-500 ${F.positions?.[e.id]?"border-red-500":""}`,...R(`positions.${e.id}`,{valueAsNumber:!0})}),F.positions?.[e.id]&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.positions[e.id].message})]}),I&&(0,t.jsxs)("td",{className:"p-3",children:[(0,t.jsxs)("select",{className:`border p-2 w-full rounded-md ${F.promotions?.[e.id]?"border-red-500":""}`,...R(`promotions.${e.id}`),children:[(0,t.jsx)("option",{value:"",children:"Select status"}),(0,t.jsx)("option",{value:"PROMOTED",children:"Promoted"}),(0,t.jsx)("option",{value:"REPEATED",children:"Repeat"})]}),F.promotions?.[e.id]&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.promotions[e.id].message})]}),I&&L&&(0,t.jsx)("td",{className:"p-3",children:(0,t.jsxs)("select",{className:`border p-2 w-full rounded-md ${F.preferredClass?.[e.id]?"border-red-500":""}`,...R(`preferredClass.${e.id}`),children:[(0,t.jsx)("option",{value:"",children:"Select class"}),(0,t.jsx)("option",{value:"SSS1A",children:"SSS1 A"}),(0,t.jsx)("option",{value:"SSS1B",children:"SSS1 B"}),(0,t.jsx)("option",{value:"SSS1C",children:"SSS1 C"})]})})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"5",className:"text-gray-500 text-center p-4",children:"No students found."})})})]}),(0,t.jsx)("div",{className:"mt-6 flex gap-4",children:(0,t.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-400",type:"button",disabled:b,onClick:e=>{e.preventDefault(),C(!0)},children:b?"Saving...":"Save"})})]})}),w&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-md w-96",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Confirm Submission"}),(0,t.jsx)("p",{className:"mb-4",children:"Are you sure you want to submit this class result? Once submitted, you won't be able to edit it."}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("input",{type:"checkbox",id:"modalConfirm",checked:P,onChange:e=>D(e.target.checked),className:"h-4 w-4"}),(0,t.jsx)("label",{htmlFor:"modalConfirm",className:"text-sm text-gray-700",children:"I agree"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,t.jsx)("button",{className:"bg-gray-300 px-4 py-2 rounded-md",onClick:()=>{C(!1),D(!1)},children:"Cancel"}),(0,t.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-md",onClick:async()=>{if(!P){(0,u.oR)({description:"Please check the confirmation box.",variant:"destructive"});return}C(!1),await k(U)()},children:"Confirm"})]})]})})]})},j=({role:e,currentUser:s,sessions:r})=>{let{databaseData:u}=(0,i.t)(),[m,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null),[f,g]=(0,a.useState)([]),[j,v]=(0,a.useState)(null),[y,N]=(0,a.useState)([]),[S,w]=(0,a.useState)(null),[C,P]=(0,a.useState)([]);(0,a.useEffect)(()=>{!p||isNaN(p)||(h(!0),(async()=>{g(await (0,d.v)(p)),h(!1)})())},[p]);let D=async r=>{v(r),w(null),P([]);let t=await (0,n.j)(p,r);N("teacher"===e?t.filter(e=>e.supervisor?.id===s):t)},R=async e=>{w(e);let s=await (0,l.V)(p,j,e);console.log("Fetched Students:",s),P(s)},k=(0,a.useMemo)(()=>f,[f]),E=(0,a.useMemo)(()=>y,[y]);return(0,a.useMemo)(()=>C,[C]),(0,t.jsxs)("div",{className:"p-6 ml-10 bg-purple-50",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"\uD83D\uDCDA Grade & Class Management"}),(0,t.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Session"}),(0,t.jsxs)("select",{className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",value:p||"",onChange:e=>x(parseInt(e.target.value,10)),children:[(0,t.jsx)("option",{value:"",children:"-- Select Session --"}),r.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"flex  flex-wrap justify-between gap-6",children:[p&&(0,t.jsxs)("div",{className:"w-full md:w-5/12 shadow-md rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-3",children:"\uD83D\uDCCC Select Grade Level"}),m?(0,t.jsx)("p",{className:"text-gray-500",children:"Loading grades..."}):k.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.map(e=>(0,t.jsx)("button",{className:`p-4 md:p-5 ${j===e.id?"bg-indigo-600 text-white":"bg-gray-100"} rounded-lg shadow-md transition-all duration-300 border border-gray-300 hover:bg-indigo-600 hover:text-white`,onClick:()=>D(e.id),children:e.name},e.id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"No grades found."})]}),j&&(0,t.jsxs)("div",{className:"w-full md:w-5/12 shadow-md rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"\uD83C\uDFEB Select Class"}),"admin"===e&&(0,t.jsx)(o.default,{memoizedClasses:E.length>0?E:null,table:"classTeacher",type:"create"})]}),E.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:E.map(e=>(0,t.jsx)("button",{className:`p-4 md:p-5 ${S===e.id?"bg-green-600 text-white":"bg-gray-100"} rounded-lg shadow-md transition-all duration-300 border border-gray-300 hover:bg-green-600 hover:text-white`,onClick:()=>R(e.id),children:e.name},e.id))}):(0,t.jsx)("p",{className:"text-gray-500",children:"teacher"===e?"No assigned classes.":"No classes found."})]})]}),S&&(0,t.jsx)("div",{className:"mt-6",children:"admin"===e?(0,t.jsx)(c,{students:C,memoizedClasses:E,selectedClass:S,selectedSession:p}):(0,t.jsx)(b,{students:C,memoizedClasses:E,memoizedGrades:k,selectedClass:S,selectedSession:p,currentUser:s})})]})}},9977:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(62740),a=r(90169),d=r(92411),n=r(84574),l=r.n(n);async function i(){let e=await (0,d.uG)(),s=await (0,d.F6)(),r=await l().session.findMany({where:{isCurrent:!0},select:{id:!0,name:!0,terms:{where:{isCurrent:!0},select:{id:!0,name:!0,sessionId:!0}},grades:{select:{id:!0,name:!0,sessionId:!0,classes:{where:{isDeleted:!1},select:{id:!0,name:!0,gradeId:!0}}}}}});return(0,t.jsx)(a.default,{role:e,currentUser:s,sessions:r})}},7951:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(62740);r(76301);let a=()=>(0,t.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:"Loading..."})},90169:(e,s,r)=>{"use strict";r.d(s,{default:()=>t});let t=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Documents\\\\Programing\\\\School Management System\\\\school\\\\src\\\\components\\\\GradeComponent.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Documents\\Programing\\School Management System\\school\\src\\components\\GradeComponent.jsx","default")},92411:(e,s,r)=>{"use strict";r.d(s,{F6:()=>d,HW:()=>a,uG:()=>n});var t=r(19561);async function a(){let{userId:e,sessionClaims:s}=await (0,t.j)();return{userId:e,role:s?.metadata?.role||"guest"}}async function d(){let{userId:e}=await a();return e}async function n(){let{role:e}=await a();return e}},84574:(e,s,r)=>{"use strict";let t;let{PrismaClient:a}=r(96330);t=new a,e.exports=t},45528:(e,s,r)=>{"use strict";r.d(s,{v:()=>a});var t=r(26248);let a=(0,t.createServerReference)("40475b2b8f8319b0846edf5c7cb5e1e728a1089951",t.callServer,void 0,t.findSourceMapURL,"fetchGrades")},79177:(e,s,r)=>{"use strict";r.d(s,{w:()=>a});var t=r(26248);let a=(0,t.createServerReference)("40ed930b2f4f73b84615356d6006f79094f1b36d34",t.callServer,void 0,t.findSourceMapURL,"fetchTerms")},81780:(e,s,r)=>{"use strict";r.d(s,{j:()=>a});var t=r(26248);let a=(0,t.createServerReference)("6036f28e7ac49e3d154e7ccf564ded12524660b7a3",t.callServer,void 0,t.findSourceMapURL,"fetchClasses")},58962:(e,s,r)=>{"use strict";r.d(s,{V:()=>a});var t=r(26248);let a=(0,t.createServerReference)("7012297d5ec348708a0d112445212707293bf72b0d",t.callServer,void 0,t.findSourceMapURL,"fetchStudents")},12692:(e,s,r)=>{"use strict";r.d(s,{L:()=>a});var t=r(26248);let a=(0,t.createServerReference)("7f2303b054e6e0cb315ec5c1d9aa5d52ec27c8241d",t.callServer,void 0,t.findSourceMapURL,"deleteStudent")},36468:(e,s,r)=>{"use strict";r.d(s,{Y:()=>a});var t=r(26248);let a=(0,t.createServerReference)("7fa0377689c74330a9ea93934256badf544a99e045",t.callServer,void 0,t.findSourceMapURL,"createClassRecord")},15913:(e,s,r)=>{"use strict";r.d(s,{g:()=>a});var t=r(26248);let a=(0,t.createServerReference)("7fe1331afc087c56e2cdd1483c6d40ec0634d1df29",t.callServer,void 0,t.findSourceMapURL,"deleteSubject")},84288:(e,s,r)=>{"use strict";r.d(s,{q:()=>a});var t=r(26248);let a=(0,t.createServerReference)("7ffbcf8ec68b2cfdb180be3e72c5e455ffa9f249ff",t.callServer,void 0,t.findSourceMapURL,"deleteTeacher")},81914:(e,s,r)=>{"use strict";r.d(s,{u:()=>o});var t=r(6868);let a=(e,s,r)=>{if(e&&"reportValidity"in e){let a=(0,t.Jt)(r,s);e.setCustomValidity(a&&a.message||""),e.reportValidity()}},d=(e,s)=>{for(let r in s.fields){let t=s.fields[r];t&&t.ref&&"reportValidity"in t.ref?a(t.ref,r,e):t.refs&&t.refs.forEach(s=>a(s,r,e))}},n=(e,s)=>{s.shouldUseNativeValidation&&d(e,s);let r={};for(let a in e){let d=(0,t.Jt)(s.fields,a),n=Object.assign(e[a]||{},{ref:d&&d.ref});if(l(s.names||Object.keys(e),a)){let e=Object.assign({},(0,t.Jt)(r,a));(0,t.hZ)(e,"root",n),(0,t.hZ)(r,a,e)}else(0,t.hZ)(r,a,n)}return r},l=(e,s)=>e.some(e=>e.startsWith(s+"."));var i=function(e,s){for(var r={};e.length;){var a=e[0],d=a.code,n=a.message,l=a.path.join(".");if(!r[l]){if("unionErrors"in a){var i=a.unionErrors[0].errors[0];r[l]={message:i.message,type:i.code}}else r[l]={message:n,type:d}}if("unionErrors"in a&&a.unionErrors.forEach(function(s){return s.errors.forEach(function(s){return e.push(s)})}),s){var o=r[l].types,c=o&&o[a.code];r[l]=(0,t.Gb)(l,s,r,d,c?[].concat(c,a.message):a.message)}e.shift()}return r},o=function(e,s,r){return void 0===r&&(r={}),function(t,a,l){try{return Promise.resolve(function(a,n){try{var i=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](t,s)).then(function(e){return l.shouldUseNativeValidation&&d({},l),{errors:{},values:r.raw?t:e}})}catch(e){return n(e)}return i&&i.then?i.then(void 0,n):i}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:n(i(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)};throw e}))}catch(e){return Promise.reject(e)}}}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[5994,2761,9187,7989,8077,7801,9562,8968,6868,6131,1237,6540],()=>r(73916));module.exports=t})();