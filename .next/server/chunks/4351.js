"use strict";exports.id=4351,exports.ids=[4351],exports.modules={34351:(e,s,r)=>{r.r(s),r.d(s,{default:()=>i});var a=r(45512),l=r(6868),c=r(58009),t=r(30999),d=r(97204),o=r(79334);let i=({type:e,data:s,memoizedClasses:r,setOpen:i})=>{let{databaseData:n,loading:u}=(0,t.t)(),h=n.teachers||[],[m,x]=(0,c.useState)(!1),{register:g,handleSubmit:p,setValue:b,formState:{errors:f}}=(0,l.mN)(),[j,v]=(0,c.useState)(null),N=(0,o.useRouter)();console.log(r,"class data available"),(0,c.useEffect)(()=>{j&&b("classId",j)},[j,b]);let[S,y]=(0,c.useState)({success:!1,error:!1,errorMessage:""}),w=p(async e=>{console.log("\uD83D\uDCCC Form Submitted:",e),x(!0);try{let s=await (0,d._)(e);s?.success?y({success:!0,error:!1,errorMessage:""}):y({success:!1,error:!0,errorMessage:s?.error||"Error occurred"})}catch(e){y({success:!1,error:!0,errorMessage:"An unexpected error occurred."})}});return(0,c.useEffect)(()=>{S.success&&setTimeout(()=>{i(!1),N.refresh()},500)},[S.success]),(0,a.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:w,children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"create"===e?"Assign Class Teacher":"Update Assigned Class Teacher"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Class"}),(0,a.jsxs)("select",{...g("classId"),className:"w-full p-2 border rounded-md bg-gray-100",onChange:e=>v(parseInt(e.target.value,10)),children:[(0,a.jsx)("option",{value:"",children:"Select Class"}),r?.length>0?r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id)):(0,a.jsx)("option",{disabled:!0,children:"No classes available"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Teacher"}),(0,a.jsxs)("select",{...g("teacherId"),className:"w-full p-2 border rounded-md bg-gray-100",children:[(0,a.jsx)("option",{value:"",children:"Select Teacher"}),u?(0,a.jsx)("option",{disabled:!0,children:"Loading..."}):h.length>0?h.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," ",e.surname]},e.id)):(0,a.jsx)("option",{disabled:!0,children:"No teachers available"})]})]}),S.success&&(0,a.jsxs)("p",{className:"text-green-500",children:["Teacher ","create"===e?"assigned":"updated"," successfully!"]}),S.error&&(0,a.jsx)("p",{className:"text-red-500",children:S.errorMessage||"Something went wrong."}),(0,a.jsx)("button",{type:"submit",className:"bg-purple-400 rounded-md text-white p-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:m,children:m?"saving":"create"===e?"Assign":"Update"})]})}},97204:(e,s,r)=>{r.d(s,{_:()=>l});var a=r(26248);let l=(0,a.createServerReference)("4058ec963f03d2831514d001901310ff848301da6d",a.callServer,void 0,a.findSourceMapURL,"assignClassTeacher")}};